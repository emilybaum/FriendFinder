<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Oswald&display=swap" rel="stylesheet">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- CSS -->
    <!-- <link rel="stylesheet" href="animate.min.css"> -->
    <link rel="stylesheet" type="text/css" href="styles.css">

    <title>FF Survey</title>

</head>
<body>

    <div class="container">
        <div id="form-row" class="row">
            <div class="col-sm">

                <h1>Survey Quesitons</h1>
                <hr>

                <div class="panel-body">
                    <form role="form">
                        
                        <div class="form-group">
                            <label for="user-name">Your name</label>
                            <input id="name" type="text" class="form-required" id="user-name" placeholder="Enter your name" required>
                        </div>

                        <div class="form-group">
                            <label for="user-photo">A Photo of you</label>
                            <input id="photo" type="text" class="form-required" id="user-photo" placeholder="Include a link to a photo" required>
                        </div>

                        <!-- SLIDER -->
                        <div class="d-flex justify-content-between  agree-disagree">
                            <div class="d-flex">Strongly Disagree</div>
                            <div class="d-flex">Strongly Agree</div>
                        </div>
                        <input type="range" class="custom-range" min="1" max="5" id="customRange2">


                        <div class="form-group">
                            <label class="questionNum" for="">Question 1</label>
                            <p>Your mind is always buzzing with unexplored ideas and plans.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q0" class="form-control">
                                <option class="q0" value="1">Strongly Disagree</option>
                                <option class="q0" value="2">Disagree</option>
                                <option class="q0" value="3">Neutral</option>
                                <option class="q0" value="4">Agree</option>
                                <option class="q0" value="5">Strongly Agree</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="questionNum" for="">Question 2</label>
                            <p>Generally speaking, you rely more on your experience than your imagination.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q1" class="form-control">
                                <option class="q1" value="1">Strongly Disagree</option>
                                <option class="q1" value="2">Disagree</option>
                                <option class="q1" value="3">Neutral</option>
                                <option class="q1" value="4">Agree</option>
                                <option class="q1" value="5">Strongly Agree</option>
                            </select>
                        </div>
                
                        <div class="form-group">
                            <label class="questionNum" for="">Question 3</label>
                            <p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q2" class="form-control">
                                <option class="q2" value="1">Strongly Disagree</option>
                                <option class="q2" value="2">Disagree</option>
                                <option class="q2" value="3">Neutral</option>
                                <option class="q2" value="4">Agree</option>
                                <option class="q2" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="questionNum" for="">Question 4</label>
                            <p>You rarely do something just out of sheer curiosity.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q3" class="form-control">
                                <option class="q3" value="1">Strongly Disagree</option>
                                <option class="q3" value="2">Disagree</option>
                                <option class="q3" value="3">Neutral</option>
                                <option class="q3" value="4">Agree</option>
                                <option class="q3" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="questionNum" for="">Question 5</label>
                            <p>People can rarely upset you.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q4" class="form-control">
                                <option class="q4" value="1">Strongly Disagree</option>
                                <option class="q4" value="2">Disagree</option>
                                <option class="q4" value="3">Neutral</option>
                                <option class="q4" value="4">Agree</option>
                                <option class="q4" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="questionNum" for="">Question 6</label>
                            <p>It is often difficult for you to relate to other people’s feelings.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q5" class="form-control">
                                <option class="q5" value="1">Strongly Disagree</option>
                                <option class="q5" value="2">Disagree</option>
                                <option class="q5" value="3">Neutral</option>
                                <option class="q5" value="4">Agree</option>
                                <option class="q5" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="questionNum" for="">Question 7</label>
                            <p>In a discussion, truth should be more important than people’s sensitivities.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q6" class="form-control">
                                <option class="q6" value="1">Strongly Disagree</option>
                                <option class="q6" value="2">Disagree</option>
                                <option class="q6" value="3">Neutral</option>
                                <option class="q6" value="4">Agree</option>
                                <option class="q6" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="questionNum" for="">Question 8</label>
                            <p>You rarely get carried away by fantasies and ideas.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q7" class="form-control">
                                <option class="q7" value="1">Strongly Disagree</option>
                                <option class="q7" value="2">Disagree</option>
                                <option class="q7" value="3">Neutral</option>
                                <option class="q7" value="4">Agree</option>
                                <option class="q7" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="questionNum" for="">Question 9</label>
                            <p>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q8" class="form-control">
                                <option class="q8" value="1">Strongly Disagree</option>
                                <option class="q8" value="2">Disagree</option>
                                <option class="q8" value="3">Neutral</option>
                                <option class="q8" value="4">Agree</option>
                                <option class="q8" value="5">Strongly Agree</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="questionNum" for="">Question 10</label>
                            <p>You feel more energetic after spending time with a group of people.</p>
                            <!-- <input type="text" class="form-control" id="reserve_phone"> -->
                            <select id="q9" class="form-control">
                                <option class="q9" value="1">Strongly Disagree</option>
                                <option class="q9" value="2">Disagree</option>
                                <option class="q9" value="3">Neutral</option>
                                <option class="q9" value="4">Agree</option>
                                <option class="q9" value="5">Strongly Agree</option>
                            </select>
                        </div>
                
                        <button id="surveySubmit" data-target="#bestMatchModal" data-toggle="modal" type="submit" class="btn btn-primary submit">Submit</button>
                    </form>
                </div>


            </div> <!-- end of form column-->
        </div> <!-- end of form row-->


        <!-- MODAL  -->
        <div id="modal-row" class="row pt-5">
            <div class="col-sm">
                
                <!-- Modal -->
                <div class="modal fade" id="bestMatchModal" tabindex="-1" role="dialog" aria-labelledby="bestMatchModalTitle"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="bestMatchModalTitle">Your Friend Match</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">

                                <h3 id="bestMatch-name" class="pb-3 text-center"></h3>
                                <img id="bestMatch-photo" class="text-center" src="">

                                <p id="bestMatch-text" class="text-center">...</p>

                            </div>
                
                        </div>
                    </div>
                </div>
    

            </div> <!-- end modal column-->
        </div> <!-- end modal row-->

        <a href="/api/friends">Link to friends API</a>

    </div> <!-- End of main container-->
    

    <!-- capture user inputs -->
    <script type="text/javascript">
    // ----------------------------------   
        var currentURL = window.location.origin;

        $("#surveySubmit").on("click", function () {
            event.preventDefault();
            console.log("submit clicked")
            // $("#form-row").addClass("d-none");
            // $("#modal-row").removeClass("d-none");
         
            // validateForm()
        // Form validation
            // function validateForm() {
            //     console.log("form validation")
            //     var isValid = true;
            //     $(".form-required").each(function () {
            //         if ($(this).val() === "") {
            //             isValid = false;
            //         }
            //     });

            //     $(".questionNum").each(function () {

            //         if ($(this).val() === "") {
            //             isValid = false;
            //         }
            //     });
            //     return isValid;
            // }

            // if (validateForm()) {
                // Create an object for the user"s data
                var surveyAnswers = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#customRange2").val(),
                        $("#q0 :selected").val(),
                        $("#q1 :selected").val(),
                        $("#q2 :selected").val(),
                        $("#q3 :selected").val(),
                        $("#q4 :selected").val(),
                        $("#q5 :selected").val(),
                        $("#q6 :selected").val(),
                        $("#q7 :selected").val(),
                        $("#q8 :selected").val(),
                        // $("#q9 :selected").val(),
                    ]
                };

            

                // capture the user input
                var userName = surveyAnswers.name;    

                $.post(currentURL + "/api/friends", surveyAnswers, function(bestMatch) {
                    // use this space to write to the page
                    $("#bestMatch-name").text(bestMatch.name);
                    $("#bestMatch-photo").attr("src", bestMatch.photo);
                    $("#bestMatchModal").modal("toggle")
                })

            // } // END OF THE FORM VALIDATION 




        }) // end button click



    // ----------------------------------
    </script>



    <!-- Bootstrap scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery.js"></script>


</body>
</html>