<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Oswald&display=swap" rel="stylesheet">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- CSS -->
    <!-- <link rel="stylesheet" href="animate.min.css"> -->
    <link rel="stylesheet" type="text/css" href="styles.css">

    <title>FF Survey</title>

</head>
<body>


<div class="jumbotron jumbotron-fluid">
    <div class="container">
        <h1 class="display-4">Fluid jumbotron</h1>
        <p class="lead">This is a modified jumbotron that occupies the entire horizontal space of its parent.</p>
    </div>
</div>



    <div class="container">

        <div id="form-row" class="row ">
            <div class="col-sm">

                <h1>Start your journey to finding your closest match</h1>
                <hr>

                <div class="panel-body">
                    <form id="form-details" role="form">
                        
                        <!-- NAME AND PASSWORD -->
                        <div class="form-row">
                            <div class="form-group col-md-4 mx-auto">
                                <label for="user-name">Your Name: </label>
                                <input id="name" type="text" class="form-control form-required" id="user-name"  placeholder="Enter your name" required>
                            </div>
                            <div class="form-group col-md-4 mx-auto">
                                <label for="user-photo">A Photo of you: </label>
                                <input id="photo" type="text" class="form-control form-required" id="user-photo" placeholder="Include a link to a photo" required>
                            </div>
                        </div>
  

                        <!-- START OF QUESTIONS -->
                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 1: </label>
                                <p>Your mind is always buzzing with unexplored ideas and plans.</p>
                            </div>

                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange1">
                        </div>
                        
                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 2:</label>
                                <p>Generally speaking, you rely more on your experience than your imagination.</p>
                            </div>
                            
                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange2">
                        </div>
                
                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 3:</label>
                                <p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
                            </div>

                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange3">
                        </div>

                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 4: </label>
                                <p>You rarely do something just out of sheer curiosity.</p>
                            </div>

                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange4">
                        </div>

                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 5: </label>
                                <p>People can rarely upset you.</p>
                            </div>
                            
                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange5">
                        </div>

                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 6: </label>
                                <p>It is often difficult for you to relate to other people’s feelings.</p>
                            </div>
                            
                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange6">
                        </div>

                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 7: </label>
                                <p>In a discussion, truth should be more important than people’s sensitivities.</p>
                            </div>
                            
                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange7">
                        </div>

                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 8: </label>
                                <p>You rarely get carried away by fantasies and ideas.</p>
                            </div>
                            
                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange8">
                        </div>

                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 9: </label>
                                <p>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</p>
                            </div>
                            
                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange9">
                        </div>

                        <div class="form-group mx-auto">
                            <div class="question-group">
                                <label class="questionNum">Question 10: </label>
                                <p>You feel more energetic after spending time with a group of people.</p>
                            </div>
                            
                            <!-- SLIDER -->
                            <div class="d-flex justify-content-between  agree-disagree">
                                <div class="d-flex">Strongly Disagree</div>
                                <div class="d-flex">Strongly Agree</div>
                            </div>
                            <input type="range" class="custom-range" min="1" max="5" id="customRange10">
                        </div>

                            <button id="surveySubmit" data-target="#bestMatchModal" data-toggle="modal" type="submit"
                            class="btn btn-primary submit mx-auto">Ready, go!</button>
                
                
                    </form>
                </div>


            </div> <!-- end of form column-->
        </div> <!-- end of form row-->


        <!-- MODAL  -->
        <div id="modal-row" class="row pt-5">
            <div class="col-sm">
                
                <!-- Modal -->
                <div class="modal fade" id="bestMatchModal" tabindex="-1" role="dialog" aria-labelledby="bestMatchModalTitle"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="bestMatchModalTitle">Your Friend Match</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">

                                <h3 id="bestMatch-name" class="pb-3 text-center"></h3>
                                <img id="bestMatch-photo" class="text-center" src="">

                                <p id="bestMatch-text" class="text-center">...</p>

                            </div>
                
                        </div>
                    </div>
                </div>
    

            </div> <!-- end modal column-->
        </div> <!-- end modal row-->

        <a href="/api/friends">Link to friends API</a>

    </div> <!-- End of main container-->
    

    <!-- capture user inputs -->
    <script type="text/javascript">
    // ----------------------------------   
        var currentURL = window.location.origin;

        $("#surveySubmit").on("click", function () {
            event.preventDefault();
            console.log("submit clicked")
            // $("#form-row").addClass("d-none");
            // $("#modal-row").removeClass("d-none");
         
            // validateForm()
        // Form validation
            // function validateForm() {
            //     console.log("form validation")
            //     var isValid = true;
            //     $(".form-required").each(function () {
            //         if ($(this).val() === "") {
            //             isValid = false;
            //         }
            //     });

            //     $(".questionNum").each(function () {

            //         if ($(this).val() === "") {
            //             isValid = false;
            //         }
            //     });
            //     return isValid;
            // }

            // if (validateForm()) {
                // Create an object for the user"s data
                var surveyAnswers = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#customRange1").val(),
                        $("#customRange2").val(),
                        $("#customRange3").val(),
                        $("#customRange4").val(),
                        $("#customRange5").val(),
                        $("#customRange6").val(),
                        $("#customRange7").val(),
                        $("#customRange8").val(),
                        $("#customRange9").val(),
                        $("#customRange10").val(),
                    ]
                };

            

                // capture the user input
                var userName = surveyAnswers.name;    

                $.post(currentURL + "/api/friends", surveyAnswers, function(bestMatch) {
                    // use this space to write to the page
                    $("#bestMatch-name").text(bestMatch.name);
                    $("#bestMatch-photo").attr("src", bestMatch.photo);
                    $("#bestMatchModal").modal("toggle")
                })

            // } // END OF THE FORM VALIDATION 




        }) // end button click



    // ----------------------------------
    </script>



    <!-- Bootstrap scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery.js"></script>


</body>
</html>